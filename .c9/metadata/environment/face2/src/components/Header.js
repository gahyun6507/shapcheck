{"filter":false,"title":"Header.js","tooltip":"/face2/src/components/Header.js","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":29,"column":0},"action":"remove","lines":["// Header.js","const handleSubjectSelect = async (subject) => {","  if (onSubjectChange) {","    onSubjectChange(subject);","  }","","  setLoading(true);","  try {","    const response = await fetch(`http://18.116.93.222:8000/api/attendance?subject=${encodeURIComponent(subject)}`);","    if (!response.ok) {","      console.error(\"API 요청 실패:\", response.status);","      return;","    }","","    const data = await response.json();","    console.log(\"API 응답 데이터:\", data);  // API 응답 확인","","    if (Array.isArray(data)) {","      setAttendanceData(data);","      console.log(\"Header - attendanceData 상태 업데이트:\", data);  // 상태 업데이트 로그 추가","    } else {","      console.error(\"응답 데이터 형식이 올바르지 않습니다.\");","    }","  } catch (error) {","    console.error(\"API 호출 중 오류 발생:\", error);","  } finally {","    setLoading(false);","  }","};",""],"id":2},{"start":{"row":0,"column":0},"end":{"row":81,"column":0},"action":"insert","lines":["import React, { useState, useRef, useEffect } from 'react';","import { useNavigate, useLocation } from 'react-router-dom';","import '../styles/Header.css';","","function Header({ setSelectedSubject }) {","  const [isProfileOpen, setIsProfileOpen] = useState(false);","  const [isSearchFocused, setIsSearchFocused] = useState(false);","  const profileRef = useRef(null);","  const searchRef = useRef(null);","  const navigate = useNavigate();","  const location = useLocation();","","  const handleClickOutside = (e) => {","    if (profileRef.current && !profileRef.current.contains(e.target)) {","      setIsProfileOpen(false);","    }","    if (searchRef.current && !searchRef.current.contains(e.target)) {","      setIsSearchFocused(false);","    }","  };","","  const handleSubjectSelect = async (subject) => {","    if (subject === '전체' && location.pathname === '/attendance-records') {","      setSelectedSubject('');  // 수정된 부분: setSelectedSubject 사용","    } else {","      setSelectedSubject(subject);  // 수정된 부분: setSelectedSubject 사용","    }","","    if (setSelectedSubject) {","      setSelectedSubject(subject === '전체' && location.pathname === '/attendance-records' ? '' : subject);","    }","  };","","  useEffect(() => {","    document.addEventListener('mousedown', handleClickOutside);","    return () => document.removeEventListener('mousedown', handleClickOutside);","  }, []);","  ","  const handleLoginClick = () => {","    navigate('/login');","  };","","  return (","    <header className=\"header\">","      <div className=\"search-container\" ref={searchRef}>","        <input","          type=\"text\"","          placeholder=\"Search...\"","          className=\"search-bar\"","          onFocus={() => setIsSearchFocused(true)}","        />","        {isSearchFocused && (","          <div className=\"search-dropdown\">","            {location.pathname === '/attendance-records' && (","              <p onClick={() => handleSubjectSelect('전체')}>전체</p>","            )}","            <p onClick={() => handleSubjectSelect('크로스플랫폼')}>크로스플랫폼</p>","            <p onClick={() => handleSubjectSelect('캡스톤')}>캡스톤</p>","            <p onClick={() => handleSubjectSelect('쿠버네티스')}>쿠버네티스</p>","          </div>","        )}","      </div>","      <div className=\"icons\">","        <span className=\"icon\">🔔</span>","        <span className=\"icon\" onClick={() => setIsProfileOpen(!isProfileOpen)}>👤</span>","      </div>","      {isProfileOpen && (","        <div className=\"profile-dropdown\" ref={profileRef}>","          <div className=\"profile-info\">","            <span className=\"profile-icon\">👤</span>","            <p>반갑습니다, OOO님</p>","          </div>","          <button className=\"profile-btn\" onClick={handleLoginClick}>로그인</button>","          <button className=\"profile-btn\">로그아웃</button>","        </div>","      )}","    </header>","  );","}","","export default Header;",""]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":12,"column":37},"end":{"row":12,"column":37},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1731827682539,"hash":"3c3c2302be6f8927bfdadb0676ffa3d2e9ddeec9"}