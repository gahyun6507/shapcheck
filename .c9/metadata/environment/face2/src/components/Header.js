{"filter":false,"title":"Header.js","tooltip":"/face2/src/components/Header.js","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":29,"column":0},"action":"remove","lines":["// Header.js","const handleSubjectSelect = async (subject) => {","  if (onSubjectChange) {","    onSubjectChange(subject);","  }","","  setLoading(true);","  try {","    const response = await fetch(`http://18.116.93.222:8000/api/attendance?subject=${encodeURIComponent(subject)}`);","    if (!response.ok) {","      console.error(\"API ìš”ì²­ ì‹¤íŒ¨:\", response.status);","      return;","    }","","    const data = await response.json();","    console.log(\"API ì‘ë‹µ ë°ì´í„°:\", data);  // API ì‘ë‹µ í™•ì¸","","    if (Array.isArray(data)) {","      setAttendanceData(data);","      console.log(\"Header - attendanceData ìƒíƒœ ì—…ë°ì´íŠ¸:\", data);  // ìƒíƒœ ì—…ë°ì´íŠ¸ ë¡œê·¸ ì¶”ê°€","    } else {","      console.error(\"ì‘ë‹µ ë°ì´í„° í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.\");","    }","  } catch (error) {","    console.error(\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:\", error);","  } finally {","    setLoading(false);","  }","};",""],"id":2},{"start":{"row":0,"column":0},"end":{"row":81,"column":0},"action":"insert","lines":["import React, { useState, useRef, useEffect } from 'react';","import { useNavigate, useLocation } from 'react-router-dom';","import '../styles/Header.css';","","function Header({ setSelectedSubject }) {","  const [isProfileOpen, setIsProfileOpen] = useState(false);","  const [isSearchFocused, setIsSearchFocused] = useState(false);","  const profileRef = useRef(null);","  const searchRef = useRef(null);","  const navigate = useNavigate();","  const location = useLocation();","","  const handleClickOutside = (e) => {","    if (profileRef.current && !profileRef.current.contains(e.target)) {","      setIsProfileOpen(false);","    }","    if (searchRef.current && !searchRef.current.contains(e.target)) {","      setIsSearchFocused(false);","    }","  };","","  const handleSubjectSelect = async (subject) => {","    if (subject === 'ì „ì²´' && location.pathname === '/attendance-records') {","      setSelectedSubject('');  // ìˆ˜ì •ëœ ë¶€ë¶„: setSelectedSubject ì‚¬ìš©","    } else {","      setSelectedSubject(subject);  // ìˆ˜ì •ëœ ë¶€ë¶„: setSelectedSubject ì‚¬ìš©","    }","","    if (setSelectedSubject) {","      setSelectedSubject(subject === 'ì „ì²´' && location.pathname === '/attendance-records' ? '' : subject);","    }","  };","","  useEffect(() => {","    document.addEventListener('mousedown', handleClickOutside);","    return () => document.removeEventListener('mousedown', handleClickOutside);","  }, []);","  ","  const handleLoginClick = () => {","    navigate('/login');","  };","","  return (","    <header className=\"header\">","      <div className=\"search-container\" ref={searchRef}>","        <input","          type=\"text\"","          placeholder=\"Search...\"","          className=\"search-bar\"","          onFocus={() => setIsSearchFocused(true)}","        />","        {isSearchFocused && (","          <div className=\"search-dropdown\">","            {location.pathname === '/attendance-records' && (","              <p onClick={() => handleSubjectSelect('ì „ì²´')}>ì „ì²´</p>","            )}","            <p onClick={() => handleSubjectSelect('í¬ë¡œìŠ¤í”Œë«í¼')}>í¬ë¡œìŠ¤í”Œë«í¼</p>","            <p onClick={() => handleSubjectSelect('ìº¡ìŠ¤í†¤')}>ìº¡ìŠ¤í†¤</p>","            <p onClick={() => handleSubjectSelect('ì¿ ë²„ë„¤í‹°ìŠ¤')}>ì¿ ë²„ë„¤í‹°ìŠ¤</p>","          </div>","        )}","      </div>","      <div className=\"icons\">","        <span className=\"icon\">ğŸ””</span>","        <span className=\"icon\" onClick={() => setIsProfileOpen(!isProfileOpen)}>ğŸ‘¤</span>","      </div>","      {isProfileOpen && (","        <div className=\"profile-dropdown\" ref={profileRef}>","          <div className=\"profile-info\">","            <span className=\"profile-icon\">ğŸ‘¤</span>","            <p>ë°˜ê°‘ìŠµë‹ˆë‹¤, OOOë‹˜</p>","          </div>","          <button className=\"profile-btn\" onClick={handleLoginClick}>ë¡œê·¸ì¸</button>","          <button className=\"profile-btn\">ë¡œê·¸ì•„ì›ƒ</button>","        </div>","      )}","    </header>","  );","}","","export default Header;",""]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":12,"column":37},"end":{"row":12,"column":37},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1731827682539,"hash":"3c3c2302be6f8927bfdadb0676ffa3d2e9ddeec9"}